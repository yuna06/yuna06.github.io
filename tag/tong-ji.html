<!DOCTYPE html>
<html lang="ja">
<head>
        <meta charset="utf-8" />
        <title>Yuna06 - 統計</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Yuna06 </a></h1>
                <nav><ul>
                    <li><a href="/category/fa-xiao.html">発酵</a></li>
                    <li><a href="/category/foxdot.html">foxdot</a></li>
                    <li><a href="/category/genome.html">genome</a></li>
                    <li><a href="/category/sonicpi.html">sonicpi</a></li>
                    <li><a href="/category/tong-ji.html">統計</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/lorenzcurve.html">ローレンツ曲線とPythonで日本人の年収の偏りを示そう！</a></h1>
<footer class="post-info">
        <abbr class="published" title="2019-03-25T23:00:00+09:00">
                Published: Mon 25 March 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/yuna06.html">yuna06</a>
        </address>
<p>In <a href="/category/tong-ji.html">統計</a>.</p>
<p>tags: <a href="/tag/tong-ji.html">統計</a> </p>
</footer><!-- /.post-info --><!DOCTYPE html>
<html lang="ja">
<head>
        <meta charset="utf-8" />
        <title>ローレンツ曲線とPythonを使って日本人の年収の偏りを証明しよう！</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<p><body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Yuna06 </a></h1>
                <nav><ul>
                    <li><a href="/category/fa-xiao.html">発酵</a></li>
                    <li><a href="/category/foxdot.html">foxdot</a></li>
                    <li><a href="/category/genome.html">genome</a></li>
                    <li><a href="/category/sonicpi.html">sonicpi</a></li>
                    <li class="active"><a href="/category/tong-ji.html">統計</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/lorenz.html" rel="bookmark"
           title="Permalink to ローレンツ曲線とPythonを使って日本人の年収の偏りを証明しよう！">ローレンツ曲線とPythonを使って日本人の年収の偏りを証明しよう！</a></h1>
    </header></p>
<div class="highlight"><pre><span></span>&amp;lt;div class=&quot;entry-content&quot;&amp;gt;
</pre></div>


<p><footer class="post-info">
        <abbr class="published" title="2019-03-25T23:00:00+09:00">
                Published: Mon 25 March 2019
        </abbr></p>
<div class="highlight"><pre><span></span>    &amp;lt;address class=&quot;vcard author&quot;&amp;gt;
            By                         &amp;lt;a class=&quot;url fn&quot; href=&quot;/author/yuna06.html&quot;&amp;gt;yuna06&amp;lt;/a&amp;gt;
    &amp;lt;/address&amp;gt;
</pre></div>


<p><p>In <a href="/category/tong-ji.html">統計</a>.</p>
<p>tags: <a href="/tag/tong-ji.html">統計</a> </p>
</footer><!-- /.post-info -->      <p>このページでは統計初学者向けにローレンツ曲線とその意味、使い所について説明し、Pythonを使って実際にデータ解析を行ってみます。</p>
<p><strong>ローレンツ曲線とは</strong></p>
<p>ローレンツ曲線とは、横軸にも縦軸にも累積相対度数を使って、描いたグラフのことです。何かの偏りを示したいときに利用されることが多いです。</p>
<p><strong>ローレンツ曲線はどんな時に使うの？</strong></p>
<p>何か「これには偏りがあるのではないか？」と思ったら試しに書いてみるといいでしょう。</p>
<p>今回は日本人の年収に偏りがあるのかローレンツ曲線を使って見てみたいと思います。
<a href="https://www.mhlw.go.jp/toukei/saikin/hw/k-tyosa/k-tyosa15/index.html">厚生労働省のHPから</a>から、<a href="https://www.mhlw.go.jp/toukei/saikin/hw/k-tyosa/k-tyosa15/xls/13.xls">世帯別年収データ</a>をダウンロードして、jupyter labで作業をするディレクトリに置きます。私はnumbersで一度開いて、csvに変換しました。データは "data"ディレクトリの中にあります。</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</pre></div></p>
<p>とりあえず、データを読み込んで中をのぞいてみましょう。</p>

<div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/income.csv&#39;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>第５表　各種世帯別にみた所得金額階級別世帯数の分布及び中央値</th>
      <th>Unnamed: 2</th>
      <th>Unnamed: 3</th>
      <th>Unnamed: 4</th>
      <th>Unnamed: 5</th>
      <th>Unnamed: 6</th>
      <th>Unnamed: 7</th>
      <th>Unnamed: 8</th>
      <th>Unnamed: 9</th>
      <th>Unnamed: 10</th>
      <th>Unnamed: 11</th>
      <th>Unnamed: 12</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>平成27年調査</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>所 得 金 額 階 級</td>
      <td>全世帯</td>
      <td>NaN</td>
      <td>高齢者世帯</td>
      <td>NaN</td>
      <td>児童のいる世帯</td>
      <td>NaN</td>
      <td>65歳以上の者の\nいる世帯</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>累積度数分布</td>
      <td>相対度数分布</td>
      <td>累積度数分布</td>
      <td>相対度数分布</td>
      <td>累積度数分布</td>
      <td>相対度数分布</td>
      <td>累積度数分布</td>
      <td>相対度数分布</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>（％）</td>
      <td>（％）</td>
      <td>（％）</td>
      <td>（％）</td>
      <td>（％）</td>
      <td>（％）</td>
      <td>（％）</td>
      <td>（％）</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>総　　　　　　数</td>
      <td>・</td>
      <td>100.0</td>
      <td>・</td>
      <td>100.0</td>
      <td>・</td>
      <td>100.0</td>
      <td>・</td>
      <td>100.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>50 万 円 未 満</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2.1</td>
      <td>2.1</td>
      <td>-</td>
      <td>-</td>
      <td>1.2</td>
      <td>1.2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>NaN</td>
      <td>50～ 100</td>
      <td>6.4</td>
      <td>5.4</td>
      <td>13.7</td>
      <td>11.6</td>
      <td>1.4</td>
      <td>1.4</td>
      <td>8.3</td>
      <td>7.1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>NaN</td>
      <td>100～ 150</td>
      <td>12.9</td>
      <td>6.5</td>
      <td>26.1</td>
      <td>12.4</td>
      <td>4.1</td>
      <td>2.7</td>
      <td>16.6</td>
      <td>8.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>NaN</td>
      <td>150～ 200</td>
      <td>20.1</td>
      <td>7.2</td>
      <td>40.9</td>
      <td>14.8</td>
      <td>6.4</td>
      <td>2.3</td>
      <td>26.5</td>
      <td>9.9</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>NaN</td>
      <td>200～ 250</td>
      <td>26.7</td>
      <td>6.7</td>
      <td>51.8</td>
      <td>10.9</td>
      <td>9.2</td>
      <td>2.8</td>
      <td>35.2</td>
      <td>8.7</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>10</th>
      <td>NaN</td>
      <td>250～ 300</td>
      <td>34.0</td>
      <td>7.3</td>
      <td>63.0</td>
      <td>11.2</td>
      <td>13.0</td>
      <td>3.8</td>
      <td>44.6</td>
      <td>9.4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>11</th>
      <td>NaN</td>
      <td>300～ 350</td>
      <td>41.1</td>
      <td>7.1</td>
      <td>73.8</td>
      <td>10.8</td>
      <td>17.6</td>
      <td>4.6</td>
      <td>53.6</td>
      <td>9.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>12</th>
      <td>NaN</td>
      <td>350～ 400</td>
      <td>47.1</td>
      <td>6.0</td>
      <td>81.4</td>
      <td>7.6</td>
      <td>21.9</td>
      <td>4.3</td>
      <td>60.2</td>
      <td>6.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>13</th>
      <td>NaN</td>
      <td>400～ 450</td>
      <td>52.0</td>
      <td>4.9</td>
      <td>85.3</td>
      <td>3.9</td>
      <td>27.0</td>
      <td>5.1</td>
      <td>64.8</td>
      <td>4.6</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>14</th>
      <td>NaN</td>
      <td>450～ 500</td>
      <td>56.9</td>
      <td>4.9</td>
      <td>89.1</td>
      <td>3.8</td>
      <td>33.1</td>
      <td>6.1</td>
      <td>69.1</td>
      <td>4.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>15</th>
      <td>NaN</td>
      <td>500～ 600</td>
      <td>65.7</td>
      <td>8.8</td>
      <td>93.6</td>
      <td>4.5</td>
      <td>45.1</td>
      <td>12.0</td>
      <td>76.2</td>
      <td>7.1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>16</th>
      <td>NaN</td>
      <td>600～ 700</td>
      <td>73.0</td>
      <td>7.3</td>
      <td>95.6</td>
      <td>2.0</td>
      <td>56.7</td>
      <td>11.7</td>
      <td>81.3</td>
      <td>5.1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>17</th>
      <td>NaN</td>
      <td>700～ 800</td>
      <td>79.3</td>
      <td>6.3</td>
      <td>97.1</td>
      <td>1.5</td>
      <td>66.9</td>
      <td>10.2</td>
      <td>85.8</td>
      <td>4.4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>18</th>
      <td>NaN</td>
      <td>800～ 900</td>
      <td>84.0</td>
      <td>4.7</td>
      <td>97.6</td>
      <td>0.6</td>
      <td>74.3</td>
      <td>7.3</td>
      <td>88.6</td>
      <td>2.9</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>19</th>
      <td>NaN</td>
      <td>900～1000</td>
      <td>87.8</td>
      <td>3.9</td>
      <td>98.1</td>
      <td>0.5</td>
      <td>81.4</td>
      <td>7.1</td>
      <td>90.9</td>
      <td>2.3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>20</th>
      <td>NaN</td>
      <td>1000 万 円 以 上</td>
      <td>100.0</td>
      <td>12.2</td>
      <td>100.0</td>
      <td>1.9</td>
      <td>100.0</td>
      <td>18.6</td>
      <td>100.0</td>
      <td>9.1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>21</th>
      <td>NaN</td>
      <td>平均所得金額\n（541万9千円）\n 以下の割合（％）</td>
      <td>61.2</td>
      <td>NaN</td>
      <td>91.5</td>
      <td>NaN</td>
      <td>38.6</td>
      <td>NaN</td>
      <td>72.5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>22</th>
      <td>NaN</td>
      <td>中央値（万円）</td>
      <td>427</td>
      <td>NaN</td>
      <td>240</td>
      <td>NaN</td>
      <td>633</td>
      <td>NaN</td>
      <td>327</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>23</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<p>今回は全世帯の累積度数分布、相対度数分布の50万円未満〜1000万円以上のデータが必要なので、下のように適宜データを抜き出し、columnsとindexの名前をつけ直します。また、データがstringになっているので、floatに直します。</p>

<div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">21</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float&#39;</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>2</th>
      <th>累積度数分布</th>
      <th>相対度数分布</th>
    </tr>
    <tr>
      <th>nan</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>50 万 円 未 満</th>
      <td>1.0</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>50～ 100</th>
      <td>6.4</td>
      <td>5.4</td>
    </tr>
    <tr>
      <th>100～ 150</th>
      <td>12.9</td>
      <td>6.5</td>
    </tr>
    <tr>
      <th>150～ 200</th>
      <td>20.1</td>
      <td>7.2</td>
    </tr>
    <tr>
      <th>200～ 250</th>
      <td>26.7</td>
      <td>6.7</td>
    </tr>
    <tr>
      <th>250～ 300</th>
      <td>34.0</td>
      <td>7.3</td>
    </tr>
    <tr>
      <th>300～ 350</th>
      <td>41.1</td>
      <td>7.1</td>
    </tr>
    <tr>
      <th>350～ 400</th>
      <td>47.1</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>400～ 450</th>
      <td>52.0</td>
      <td>4.9</td>
    </tr>
    <tr>
      <th>450～ 500</th>
      <td>56.9</td>
      <td>4.9</td>
    </tr>
    <tr>
      <th>500～ 600</th>
      <td>65.7</td>
      <td>8.8</td>
    </tr>
    <tr>
      <th>600～ 700</th>
      <td>73.0</td>
      <td>7.3</td>
    </tr>
    <tr>
      <th>700～ 800</th>
      <td>79.3</td>
      <td>6.3</td>
    </tr>
    <tr>
      <th>800～ 900</th>
      <td>84.0</td>
      <td>4.7</td>
    </tr>
    <tr>
      <th>900～1000</th>
      <td>87.8</td>
      <td>3.9</td>
    </tr>
    <tr>
      <th>1000 万 円 以 上</th>
      <td>100.0</td>
      <td>12.2</td>
    </tr>
  </tbody>
</table>
</div>

<p>年収500万円までは50万円刻み、500万円からは100万円刻みで階級が分けられています。そこで、一つの階級の集団の年収が平均を仮定して、(平均年収✖️世帯数)の相対度数を求めます。</p>

<p>例えば、200~250の階級の平均年収は225万円、600~700の階級の平均年収は650万円としています。
1000万円以上の階級の平均年収はだいたい2000万円というデータがありましたので、今回は2000万円として計算します。</p>

<p>計算できたらDataFrameを結合します。</p>

<div class="highlight"><pre><span></span><span class="n">arr1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>

<span class="c1"># 年収0~500万円までの階級をarr1にappendしていく。</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">arr1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="mi">50</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">25</span><span class="p">))</span>

<span class="c1"># 年収500~1000万円までの階級をarr1にappendしていく。    </span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">arr1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">550</span><span class="p">))</span>
<span class="n">arr1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arr1</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="mi">100</span> <span class="o">*</span> <span class="mi">2000</span><span class="p">)</span>
<span class="nb">sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">arr1</span><span class="p">)</span>
<span class="n">arr1</span> <span class="o">=</span> <span class="n">arr1</span><span class="o">/</span><span class="nb">sum</span> <span class="o">*</span> <span class="mi">100</span>

<span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr1</span><span class="p">)</span>
<span class="n">df1</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="n">df1</span> <span class="o">=</span> <span class="n">df1</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;(平均年収✖️世帯数)の相対度数&#39;</span><span class="p">})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df1</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

<p>続いて、(平均年収✖️世帯数)の累積相対度数を求めて、DataFrameを結合します。</p>

<div class="highlight"><pre><span></span><span class="n">arr2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)):</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">arr2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arr2</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr2</span><span class="p">)</span>
<span class="n">df2</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="n">df2</span> <span class="o">=</span> <span class="n">df2</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;(平均年収✖️世帯数)の累積相対度数&#39;</span><span class="p">})</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

<p>完成したDataFrameは下のとうりです。</p>

<div class="highlight"><pre><span></span><span class="n">df</span>
</pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>累積度数分布</th>
      <th>相対度数分布</th>
      <th>(平均年収✖️世帯数)の相対度数</th>
      <th>(平均年収✖️世帯数)の累積相対度数</th>
    </tr>
    <tr>
      <th>nan</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>50 万 円 未 満</th>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.041115</td>
      <td>0.041115</td>
    </tr>
    <tr>
      <th>50～ 100</th>
      <td>6.4</td>
      <td>5.4</td>
      <td>0.666064</td>
      <td>0.707179</td>
    </tr>
    <tr>
      <th>100～ 150</th>
      <td>12.9</td>
      <td>6.5</td>
      <td>1.336239</td>
      <td>2.043417</td>
    </tr>
    <tr>
      <th>150～ 200</th>
      <td>20.1</td>
      <td>7.2</td>
      <td>2.072198</td>
      <td>4.115615</td>
    </tr>
    <tr>
      <th>200～ 250</th>
      <td>26.7</td>
      <td>6.7</td>
      <td>2.479237</td>
      <td>6.594852</td>
    </tr>
    <tr>
      <th>250～ 300</th>
      <td>34.0</td>
      <td>7.3</td>
      <td>3.301538</td>
      <td>9.896390</td>
    </tr>
    <tr>
      <th>300～ 350</th>
      <td>41.1</td>
      <td>7.1</td>
      <td>3.794918</td>
      <td>13.691308</td>
    </tr>
    <tr>
      <th>350～ 400</th>
      <td>47.1</td>
      <td>6.0</td>
      <td>3.700354</td>
      <td>17.391662</td>
    </tr>
    <tr>
      <th>400～ 450</th>
      <td>52.0</td>
      <td>4.9</td>
      <td>3.424883</td>
      <td>20.816545</td>
    </tr>
    <tr>
      <th>450～ 500</th>
      <td>56.9</td>
      <td>4.9</td>
      <td>3.827810</td>
      <td>24.644355</td>
    </tr>
    <tr>
      <th>500～ 600</th>
      <td>65.7</td>
      <td>8.8</td>
      <td>0.904531</td>
      <td>25.548886</td>
    </tr>
    <tr>
      <th>600～ 700</th>
      <td>73.0</td>
      <td>7.3</td>
      <td>5.772552</td>
      <td>31.321437</td>
    </tr>
    <tr>
      <th>700～ 800</th>
      <td>79.3</td>
      <td>6.3</td>
      <td>8.017433</td>
      <td>39.338870</td>
    </tr>
    <tr>
      <th>800～ 900</th>
      <td>84.0</td>
      <td>4.7</td>
      <td>10.064962</td>
      <td>49.403832</td>
    </tr>
    <tr>
      <th>900～1000</th>
      <td>87.8</td>
      <td>3.9</td>
      <td>10.467889</td>
      <td>59.871721</td>
    </tr>
    <tr>
      <th>1000 万 円 以 上</th>
      <td>100.0</td>
      <td>12.2</td>
      <td>40.128279</td>
      <td>100.000000</td>
    </tr>
  </tbody>
</table>
</div>

<p>これではよくわからないので、視覚的に捉えられるようにmatplotlibでグラフを作りましょう。</p>

<div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">110</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>  <span class="n">label</span><span class="o">=</span><span class="s1">&#39;plot&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;日本人の年収のローレンツ曲線&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;世帯数累積度&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;(平均年収*世帯数)の累積相対度数&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>

<p><img alt="png" src="lorenz_files/lorenz_13_0.png"></p>

<p>青色の曲線が今回書くことができた、ローレンツ曲線です。
両軸ともに累積相対度数を通っているので最終的に値が100%になることは直感的に理解できると思います。
ところで、y = x のグラフに比べて、下の方を伝っていることがわかると思います。
これこそが、年収の分布に不均一性が存在していることを示しています。</p>

<p>例えば、(平均年収*世帯数)の累積相対度数 = 20%のところで、だいたい、世帯数累積度 = 50%となっていますね。これは、日本人の年収の合計20%を年収の低い50%の人が受け取っているという意味になります。</p>

<p>また、平均年収*世帯数)の累積相対度数 = 40%、世帯数累積度 = 80%となっているところもありますね、これは高級どり上位20%の人が、日本人の年収合計の60%を所有しているということになります。うーん、年収の不均等は確かに存在していそうですね。</p>

<p>ちなみに y = x の直線をローレンツ曲線のグラフでは均等配分線と呼ばれ、直線のように分布していれば、年収の偏りは存在しないよいうことになります。逆に 均等配分線とローレンツ曲線で作られる三日月型の面積が多ければ大きいほど偏りが大きいということになります。</p>

<div class="highlight"><pre><span></span>
</pre></div>

<div class="highlight"><pre><span></span>
</pre></div>

<div class="highlight"><pre><span></span>&amp;lt;/div&amp;gt;&amp;lt;!-- /.entry-content --&amp;gt;
</pre></div>


<p></article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul></p>
<div class="highlight"><pre><span></span>                        <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">li</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span><span class="nt">You</span> <span class="nt">can</span> <span class="nt">add</span> <span class="nt">links</span> <span class="nt">in</span> <span class="nt">your</span> <span class="nt">config</span> <span class="nt">file</span><span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">a</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">li</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>
                        <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">li</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span><span class="nt">Another</span> <span class="nt">social</span> <span class="nt">link</span><span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">a</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">li</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>
                    <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">ul</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>
            <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">div</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;&amp;</span><span class="nt">lt</span><span class="o">;!</span><span class="nt">--</span> <span class="o">/</span><span class="p">.</span><span class="nc">social</span> <span class="nt">--</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>
    <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">section</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;&amp;</span><span class="nt">lt</span><span class="o">;!</span><span class="nt">--</span> <span class="o">/</span><span class="p">#</span><span class="nn">extras</span> <span class="nt">--</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>

    <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">footer</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;contentinfo&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;body&quot;</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>
            <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">address</span> <span class="nt">id</span><span class="o">=</span><span class="s2">&quot;about&quot;</span> <span class="nt">class</span><span class="o">=</span><span class="s2">&quot;vcard body&quot;</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>
            <span class="nt">Proudly</span> <span class="nt">powered</span> <span class="nt">by</span> <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;http://getpelican.com/&quot;</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span><span class="nt">Pelican</span><span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">a</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;,</span> <span class="nt">which</span> <span class="nt">takes</span> <span class="nt">great</span> <span class="nt">advantage</span> <span class="nt">of</span> <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;http://python.org&quot;</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span><span class="nt">Python</span><span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">a</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;.</span>
            <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">address</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;&amp;</span><span class="nt">lt</span><span class="o">;!</span><span class="nt">--</span> <span class="o">/</span><span class="p">#</span><span class="nn">about</span> <span class="nt">--</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>

            <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">p</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span><span class="nt">The</span> <span class="nt">theme</span> <span class="nt">is</span> <span class="nt">by</span> <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;</span><span class="nt">a</span> <span class="nt">href</span><span class="o">=</span><span class="s2">&quot;http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/&quot;</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span><span class="nt">Smashing</span> <span class="nt">Magazine</span><span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">a</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;,</span> <span class="nt">thanks</span><span class="o">!&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">p</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>
    <span class="o">&amp;</span><span class="nt">lt</span><span class="o">;/</span><span class="nt">footer</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;&amp;</span><span class="nt">lt</span><span class="o">;!</span><span class="nt">--</span> <span class="o">/</span><span class="p">#</span><span class="nn">contentinfo</span> <span class="nt">--</span><span class="o">&amp;</span><span class="nt">gt</span><span class="o">;</span>
</pre></div>


<p></body>
</html></p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/lorenzcurve00.html" rel="bookmark"
                           title="Permalink to ローレンツ曲線とPythonで日本人の年収の偏りを示そう！">ローレンツ曲線とPythonで日本人の年収の偏りを示そう！</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-03-25T23:00:00+09:00">
                Published: Mon 25 March 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/yuna06.html">yuna06</a>
        </address>
<p>In <a href="/category/tong-ji.html">統計</a>.</p>
<p>tags: <a href="/tag/tong-ji.html">統計</a> </p>
</footer><!-- /.post-info -->                <p>ローレンツ曲線</p>
                <a class="readmore" href="/lorenzcurve00.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/statistics_lorenzcurve.html" rel="bookmark"
                           title="Permalink to "></a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2019-03-25T23:00:00+09:00">
                Published: Mon 25 March 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/yuna06.html">yuna06</a>
        </address>
<p>In <a href="/category/tong-ji.html">統計</a>.</p>
<p>tags: <a href="/tag/tong-ji.html">統計</a> </p>
</footer><!-- /.post-info -->                
                <a class="readmore" href="/statistics_lorenzcurve.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>